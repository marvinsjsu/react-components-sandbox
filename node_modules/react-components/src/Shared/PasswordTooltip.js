import React from 'react';
import ReactTooltip from 'react-tooltip';

import {rule} from '../../utils/nano';
import { styles } from '../../utils/styles';
import { Password } from '../../utils/password';
import HelpOutline from '@material-ui/icons/HelpOutline';
import Done from '@material-ui/icons/Done';
import Close from '@material-ui/icons/Close';

const toolTipStyle = rule({
  boxShadow: '0 10px 40px 0 rgba(0,0,0,0.2);',
  borderRadius: '5px',
  padding: '24px',
});

const PasswordTooltip = (props) => {
  const requirementsMet = Password.getRequirementsMet(props.password);
  const requirementsUnmet = Password.getRequirementsUnmet(props.password);

  const unMetList = requirementsUnmet.map((item, idx) => {
    return (
      <li key={item.label} style={styles.passwordError}>
        <Close style={styles.passwordErrorIcon} />
        {item.label}
      </li>
    );
  });

  const metList = requirementsMet.map((item, idx) => {
    return (
      <li key={item.label} style={styles.passwordSuccess}>
        <Done style={styles.passwordSuccessIcon}/>
        {item.label}
      </li>
    );
  });

  return (
    <span>
      <a
        data-tip
        data-for='password-tooltip'
      >
        <HelpOutline style={styles.helpIcon} />
      </a>
      <ReactTooltip
        className={toolTipStyle}
        id={'password-tooltip'}
        place={'right'}
        type={'light'}
        effect={'solid'}
      >
        <h2 style={styles.passwordListTitle}>
          Password must include:
        </h2>
        <ul>
          {unMetList}
          {metList}
        </ul>
      </ReactTooltip>
    </span>
  );
}

export default PasswordTooltip;
import React from 'react';

import { Password } from '../../utils/password';
import { COLORS } from '../../utils/colors';
import { MESSAGE } from '../../utils/messages';
import { styles } from '../../utils/styles';

const PasswordStrengthDisplay = (props) => {

  let passwordMessage = MESSAGE.PASSWORD_STRENGTH.WEAK;
  let passwordMessageStyle = {color: COLORS.PASSWORD_STRENGTH.WEAK};
  let label = '';

  if (props.password.length === 0) {
    passwordMessage = '';
  } else if (!Password.meetsMinimumCharacters(props.password)) {
    label = 'Password Strength:';
    passwordMessage = MESSAGE.PASSWORD_STRENGTH.WEAK;
    passwordMessageStyle = {color: COLORS.PASSWORD_STRENGTH.WEAK};
  } else {

    const requirementsMet = Password.countRequirementsMet(props.password);
    label = 'Password Strength:';
    if (requirementsMet >= 4 && requirementsMet < 5) {
      passwordMessage = MESSAGE.PASSWORD_STRENGTH.MEDIUM;
      passwordMessageStyle = {color: COLORS.PASSWORD_STRENGTH.MEDIUM};
    }

    if (requirementsMet === 5) {
      passwordMessage = MESSAGE.PASSWORD_STRENGTH.STRONG;
      passwordMessageStyle = {color: COLORS.PASSWORD_STRENGTH.STRONG};
    }

  }

  if (props.passwordMismatch) {
    label = 'Password Strength:';
    passwordMessage = MESSAGE.PASSWORD_STRENGTH.MISMATCH;
    passwordMessageStyle = {color: COLORS.PASSWORD_STRENGTH.WEAK};
  }

  return (
    <p style={styles.passwordStrengthDisplay}>
      { label }
      <span style={passwordMessageStyle}>
        { " " + passwordMessage }
      </span>
    </p>
  );
};


export default PasswordStrengthDisplay;
import Cookies from 'universal-cookie';

export const Cookie = {
  saveUser: function (userData) {
    if (userData.access_token) {

      const cookies = new Cookies();

      cookies.set('access_token', userData.access_token, { path: '/' })

      if (userData.user) {
        cookies.set('user', JSON.stringify(userData.user), { path: '/' });
        cookies.set('user_id', userData.user.id, { path: '/' });
      }

      if (userData.expires_in) {
        cookies.set('expires_in', userData.expires_in, { path: '/' })
      }

      if (userData.token_type) {
        cookies.set('token_type', userData.token_type, { path: '/' })
      }
    }
  },
  getUser: function () {
    const cookies = new Cookies();
    const user = cookies.get('user');

    if (user && user.email) {
      return user;
    }

    throw 'UserRetrievalFailed';
  }
}